"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chat";
exports.ids = ["pages/api/chat"];
exports.modules = {

/***/ "(api-node)/./lib/embed.ts":
/*!**********************!*\
  !*** ./lib/embed.ts ***!
  \**********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeCosineSimilarity: () => (/* binding */ computeCosineSimilarity),\n/* harmony export */   getEmbedding: () => (/* binding */ getEmbedding)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"@google/generative-ai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__]);\n_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/**\n * Generates embeddings for text using the Gemini Embeddings API\n */ \n// Initialize the Google Generative AI with your API key\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(process.env.GEMINI_API_KEY || '');\n// Get the embedding model\nconst embeddingModel = genAI.getGenerativeModel({\n    model: \"embedding-001\"\n});\nasync function getEmbedding(text) {\n    try {\n        const result = await embeddingModel.embedContent(text);\n        const embedding = result.embedding.values;\n        return embedding;\n    } catch (error) {\n        console.error('Error generating embedding:', error);\n        throw new Error('Failed to generate embedding');\n    }\n}\n/**\n * Computes cosine similarity between two vectors\n */ function computeCosineSimilarity(vecA, vecB) {\n    if (!vecA || !vecB || vecA.length !== vecB.length) {\n        throw new Error('Vectors must have the same dimensions');\n    }\n    let dotProduct = 0;\n    let normA = 0;\n    let normB = 0;\n    for(let i = 0; i < vecA.length; i++){\n        dotProduct += vecA[i] * vecB[i];\n        normA += vecA[i] * vecA[i];\n        normB += vecB[i] * vecB[i];\n    }\n    normA = Math.sqrt(normA);\n    normB = Math.sqrt(normB);\n    if (normA === 0 || normB === 0) {\n        return 0;\n    }\n    return dotProduct / (normA * normB);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9lbWJlZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Q0FFQyxHQUMwRDtBQUUzRCx3REFBd0Q7QUFDeEQsTUFBTUMsUUFBUSxJQUFJRCxxRUFBa0JBLENBQUNFLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJO0FBRW5FLDBCQUEwQjtBQUMxQixNQUFNQyxpQkFBaUJKLE1BQU1LLGtCQUFrQixDQUFDO0lBQUVDLE9BQU87QUFBZ0I7QUFFbEUsZUFBZUMsYUFBYUMsSUFBWTtJQUM3QyxJQUFJO1FBQ0YsTUFBTUMsU0FBUyxNQUFNTCxlQUFlTSxZQUFZLENBQUNGO1FBQ2pELE1BQU1HLFlBQVlGLE9BQU9FLFNBQVMsQ0FBQ0MsTUFBTTtRQUN6QyxPQUFPRDtJQUNULEVBQUUsT0FBT0UsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsK0JBQStCQTtRQUM3QyxNQUFNLElBQUlFLE1BQU07SUFDbEI7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU0Msd0JBQXdCQyxJQUFjLEVBQUVDLElBQWM7SUFDcEUsSUFBSSxDQUFDRCxRQUFRLENBQUNDLFFBQVFELEtBQUtFLE1BQU0sS0FBS0QsS0FBS0MsTUFBTSxFQUFFO1FBQ2pELE1BQU0sSUFBSUosTUFBTTtJQUNsQjtJQUVBLElBQUlLLGFBQWE7SUFDakIsSUFBSUMsUUFBUTtJQUNaLElBQUlDLFFBQVE7SUFFWixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSU4sS0FBS0UsTUFBTSxFQUFFSSxJQUFLO1FBQ3BDSCxjQUFjSCxJQUFJLENBQUNNLEVBQUUsR0FBR0wsSUFBSSxDQUFDSyxFQUFFO1FBQy9CRixTQUFTSixJQUFJLENBQUNNLEVBQUUsR0FBR04sSUFBSSxDQUFDTSxFQUFFO1FBQzFCRCxTQUFTSixJQUFJLENBQUNLLEVBQUUsR0FBR0wsSUFBSSxDQUFDSyxFQUFFO0lBQzVCO0lBRUFGLFFBQVFHLEtBQUtDLElBQUksQ0FBQ0o7SUFDbEJDLFFBQVFFLEtBQUtDLElBQUksQ0FBQ0g7SUFFbEIsSUFBSUQsVUFBVSxLQUFLQyxVQUFVLEdBQUc7UUFDOUIsT0FBTztJQUNUO0lBRUEsT0FBT0YsYUFBY0MsQ0FBQUEsUUFBUUMsS0FBSTtBQUNuQyIsInNvdXJjZXMiOlsiL2hvbWUvaWlpdGQvb3Jla2kvbGxtZG9jcy1yL3JhZy1hcHAvbGliL2VtYmVkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVzIGVtYmVkZGluZ3MgZm9yIHRleHQgdXNpbmcgdGhlIEdlbWluaSBFbWJlZGRpbmdzIEFQSVxuICovXG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tICdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknO1xuXG4vLyBJbml0aWFsaXplIHRoZSBHb29nbGUgR2VuZXJhdGl2ZSBBSSB3aXRoIHlvdXIgQVBJIGtleVxuY29uc3QgZ2VuQUkgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZIHx8ICcnKTtcblxuLy8gR2V0IHRoZSBlbWJlZGRpbmcgbW9kZWxcbmNvbnN0IGVtYmVkZGluZ01vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6IFwiZW1iZWRkaW5nLTAwMVwiIH0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RW1iZWRkaW5nKHRleHQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbWJlZGRpbmdNb2RlbC5lbWJlZENvbnRlbnQodGV4dCk7XG4gICAgY29uc3QgZW1iZWRkaW5nID0gcmVzdWx0LmVtYmVkZGluZy52YWx1ZXM7XG4gICAgcmV0dXJuIGVtYmVkZGluZztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIGVtYmVkZGluZzonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgZW1iZWRkaW5nJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21wdXRlcyBjb3NpbmUgc2ltaWxhcml0eSBiZXR3ZWVuIHR3byB2ZWN0b3JzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlQ29zaW5lU2ltaWxhcml0eSh2ZWNBOiBudW1iZXJbXSwgdmVjQjogbnVtYmVyW10pOiBudW1iZXIge1xuICBpZiAoIXZlY0EgfHwgIXZlY0IgfHwgdmVjQS5sZW5ndGggIT09IHZlY0IubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdWZWN0b3JzIG11c3QgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb25zJyk7XG4gIH1cblxuICBsZXQgZG90UHJvZHVjdCA9IDA7XG4gIGxldCBub3JtQSA9IDA7XG4gIGxldCBub3JtQiA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZWNBLmxlbmd0aDsgaSsrKSB7XG4gICAgZG90UHJvZHVjdCArPSB2ZWNBW2ldICogdmVjQltpXTtcbiAgICBub3JtQSArPSB2ZWNBW2ldICogdmVjQVtpXTtcbiAgICBub3JtQiArPSB2ZWNCW2ldICogdmVjQltpXTtcbiAgfVxuXG4gIG5vcm1BID0gTWF0aC5zcXJ0KG5vcm1BKTtcbiAgbm9ybUIgPSBNYXRoLnNxcnQobm9ybUIpO1xuXG4gIGlmIChub3JtQSA9PT0gMCB8fCBub3JtQiA9PT0gMCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIGRvdFByb2R1Y3QgLyAobm9ybUEgKiBub3JtQik7XG59Il0sIm5hbWVzIjpbIkdvb2dsZUdlbmVyYXRpdmVBSSIsImdlbkFJIiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIiwiZW1iZWRkaW5nTW9kZWwiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJtb2RlbCIsImdldEVtYmVkZGluZyIsInRleHQiLCJyZXN1bHQiLCJlbWJlZENvbnRlbnQiLCJlbWJlZGRpbmciLCJ2YWx1ZXMiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsImNvbXB1dGVDb3NpbmVTaW1pbGFyaXR5IiwidmVjQSIsInZlY0IiLCJsZW5ndGgiLCJkb3RQcm9kdWN0Iiwibm9ybUEiLCJub3JtQiIsImkiLCJNYXRoIiwic3FydCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/embed.ts\n");

/***/ }),

/***/ "(api-node)/./lib/rag.ts":
/*!********************!*\
  !*** ./lib/rag.ts ***!
  \********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRAGStatus: () => (/* binding */ getRAGStatus),\n/* harmony export */   initializeRAG: () => (/* binding */ initializeRAG),\n/* harmony export */   queryRAG: () => (/* binding */ queryRAG)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"@google/generative-ai\");\n/* harmony import */ var _embed__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./embed */ \"(api-node)/./lib/embed.ts\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__, _embed__WEBPACK_IMPORTED_MODULE_1__]);\n([_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__, _embed__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n// Initialize the Google Generative AI with your API key\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(process.env.GEMINI_API_KEY || '');\n// Path to store embedded chunks\nconst embeddingsFilePath = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), 'data', 'embeddings.json');\n// Create a global in-memory store for our embedded chunks\n// Format: { id: string, text: string, embedding: number[] }[]\nlet embeddedChunks = [];\n// Load embeddings from file if they exist\ntry {\n    if (fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(embeddingsFilePath)) {\n        const data = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(embeddingsFilePath, 'utf-8');\n        embeddedChunks = JSON.parse(data);\n        console.log(`Loaded ${embeddedChunks.length} embedded chunks from disk`);\n    }\n} catch (error) {\n    console.error('Error loading embeddings from disk:', error);\n    embeddedChunks = [];\n}\n/**\n * Save the current embeddings to disk\n */ function saveEmbeddingsToDisk() {\n    try {\n        const dataDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), 'data');\n        if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(dataDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(dataDir, {\n                recursive: true\n            });\n        }\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(embeddingsFilePath, JSON.stringify(embeddedChunks), 'utf-8');\n        console.log(`Saved ${embeddedChunks.length} embedded chunks to disk`);\n    } catch (error) {\n        console.error('Error saving embeddings to disk:', error);\n    }\n}\nasync function initializeRAG(chunks) {\n    try {\n        console.log(`Initializing RAG with ${chunks.length} chunks`);\n        embeddedChunks = [];\n        // Process chunks in batches to avoid rate limiting issues\n        const batchSize = 10;\n        for(let i = 0; i < chunks.length; i += batchSize){\n            const batch = chunks.slice(i, i + batchSize);\n            // Process batch in parallel\n            const batchPromises = batch.map(async (chunk, index)=>{\n                const embedding = await (0,_embed__WEBPACK_IMPORTED_MODULE_1__.getEmbedding)(chunk);\n                return {\n                    id: `chunk-${i + index}`,\n                    text: chunk,\n                    embedding\n                };\n            });\n            const batchResults = await Promise.all(batchPromises);\n            embeddedChunks.push(...batchResults);\n            // Simple progress logging\n            console.log(`Embedded ${Math.min(i + batchSize, chunks.length)}/${chunks.length} chunks`);\n            // Add a small delay between batches to avoid rate limiting\n            if (i + batchSize < chunks.length) {\n                await new Promise((resolve)=>setTimeout(resolve, 500));\n            }\n        }\n        // Save embeddings to disk after initialization\n        saveEmbeddingsToDisk();\n        console.log('RAG initialization complete');\n        return true;\n    } catch (error) {\n        console.error('Error initializing RAG:', error);\n        throw new Error('Failed to initialize RAG');\n    }\n}\nasync function queryRAG(question, topK = 3) {\n    try {\n        if (embeddedChunks.length === 0) {\n            throw new Error('RAG system not initialized with content');\n        }\n        // Get embedding for the question\n        const questionEmbedding = await (0,_embed__WEBPACK_IMPORTED_MODULE_1__.getEmbedding)(question);\n        // Calculate similarity scores for all chunks\n        const scoredChunks = embeddedChunks.map((chunk)=>({\n                ...chunk,\n                score: (0,_embed__WEBPACK_IMPORTED_MODULE_1__.computeCosineSimilarity)(questionEmbedding, chunk.embedding)\n            }));\n        // Sort by similarity score (descending) and take top K\n        const topChunks = scoredChunks.sort((a, b)=>b.score - a.score).slice(0, topK);\n        // Extract just the text from the top chunks\n        const relevantContext = topChunks.map((chunk)=>chunk.text).join(\"\\n\\n\");\n        // Get the Gemini model for generating responses\n        const model = genAI.getGenerativeModel({\n            model: \"gemini-2.0-flash-lite-preview-02-05\"\n        });\n        // Create the prompt with context and question\n        const prompt = `You are a helpful assistant. Use the following documentation context to answer the question.\n\nContext:\n${relevantContext}\n\nQuestion:\n${question}\n\nIf the answer cannot be found in the context, say \"I don't have enough information to answer that question based on the provided documentation.\"`;\n        // Generate a response\n        const result = await model.generateContent(prompt);\n        const response = result.response.text();\n        return {\n            response,\n            usedChunks: topChunks.map((chunk)=>({\n                    id: chunk.id,\n                    text: chunk.text\n                }))\n        };\n    } catch (error) {\n        console.error('Error querying RAG:', error);\n        throw new Error('Failed to query RAG');\n    }\n}\nfunction getRAGStatus() {\n    // Add logging to help debug the initialization state\n    console.log(`RAG status check: ${embeddedChunks.length} chunks loaded, initialized: ${embeddedChunks.length > 0}`);\n    return {\n        initialized: embeddedChunks.length > 0,\n        chunkCount: embeddedChunks.length\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVFHLEtBQUssQ0FBQyx1QkFBdUJBO1FBQ3JDLE1BQU0sSUFBSTRCLE1BQU07SUFDbEI7QUFDRjtBQUVPLFNBQVNtQjtJQUNkLHFEQUFxRDtJQUNyRGxELFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGtCQUFrQixFQUFFUCxlQUFlUSxNQUFNLENBQUMsNkJBQTZCLEVBQUVSLGVBQWVRLE1BQU0sR0FBRyxHQUFHO0lBRWpILE9BQU87UUFDTGlELGFBQWF6RCxlQUFlUSxNQUFNLEdBQUc7UUFDckNrRCxZQUFZMUQsZUFBZVEsTUFBTTtJQUNuQztBQUNGIiwic291cmNlcyI6WyIvaG9tZS9paWl0ZC9vcmVraS9sbG1kb2NzLXIvcmFnLWFwcC9saWIvcmFnLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gJ0Bnb29nbGUvZ2VuZXJhdGl2ZS1haSc7XG5pbXBvcnQgeyBnZXRFbWJlZGRpbmcsIGNvbXB1dGVDb3NpbmVTaW1pbGFyaXR5IH0gZnJvbSAnLi9lbWJlZCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbi8vIEluaXRpYWxpemUgdGhlIEdvb2dsZSBHZW5lcmF0aXZlIEFJIHdpdGggeW91ciBBUEkga2V5XG5jb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgJycpO1xuXG4vLyBQYXRoIHRvIHN0b3JlIGVtYmVkZGVkIGNodW5rc1xuY29uc3QgZW1iZWRkaW5nc0ZpbGVQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJywgJ2VtYmVkZGluZ3MuanNvbicpO1xuXG4vLyBDcmVhdGUgYSBnbG9iYWwgaW4tbWVtb3J5IHN0b3JlIGZvciBvdXIgZW1iZWRkZWQgY2h1bmtzXG4vLyBGb3JtYXQ6IHsgaWQ6IHN0cmluZywgdGV4dDogc3RyaW5nLCBlbWJlZGRpbmc6IG51bWJlcltdIH1bXVxubGV0IGVtYmVkZGVkQ2h1bmtzOiB7IGlkOiBzdHJpbmc7IHRleHQ6IHN0cmluZzsgZW1iZWRkaW5nOiBudW1iZXJbXSB9W10gPSBbXTtcblxuLy8gTG9hZCBlbWJlZGRpbmdzIGZyb20gZmlsZSBpZiB0aGV5IGV4aXN0XG50cnkge1xuICBpZiAoZnMuZXhpc3RzU3luYyhlbWJlZGRpbmdzRmlsZVBhdGgpKSB7XG4gICAgY29uc3QgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhlbWJlZGRpbmdzRmlsZVBhdGgsICd1dGYtOCcpO1xuICAgIGVtYmVkZGVkQ2h1bmtzID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICBjb25zb2xlLmxvZyhgTG9hZGVkICR7ZW1iZWRkZWRDaHVua3MubGVuZ3RofSBlbWJlZGRlZCBjaHVua3MgZnJvbSBkaXNrYCk7XG4gIH1cbn0gY2F0Y2ggKGVycm9yKSB7XG4gIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgZW1iZWRkaW5ncyBmcm9tIGRpc2s6JywgZXJyb3IpO1xuICBlbWJlZGRlZENodW5rcyA9IFtdO1xufVxuXG4vKipcbiAqIFNhdmUgdGhlIGN1cnJlbnQgZW1iZWRkaW5ncyB0byBkaXNrXG4gKi9cbmZ1bmN0aW9uIHNhdmVFbWJlZGRpbmdzVG9EaXNrKCkge1xuICB0cnkge1xuICAgIGNvbnN0IGRhdGFEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnKTtcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGF0YURpcikpIHtcbiAgICAgIGZzLm1rZGlyU3luYyhkYXRhRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgXG4gICAgZnMud3JpdGVGaWxlU3luYyhlbWJlZGRpbmdzRmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGVtYmVkZGVkQ2h1bmtzKSwgJ3V0Zi04Jyk7XG4gICAgY29uc29sZS5sb2coYFNhdmVkICR7ZW1iZWRkZWRDaHVua3MubGVuZ3RofSBlbWJlZGRlZCBjaHVua3MgdG8gZGlza2ApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBlbWJlZGRpbmdzIHRvIGRpc2s6JywgZXJyb3IpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplUkFHKGNodW5rczogc3RyaW5nW10pIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgSW5pdGlhbGl6aW5nIFJBRyB3aXRoICR7Y2h1bmtzLmxlbmd0aH0gY2h1bmtzYCk7XG4gICAgZW1iZWRkZWRDaHVua3MgPSBbXTtcbiAgICBcbiAgICAvLyBQcm9jZXNzIGNodW5rcyBpbiBiYXRjaGVzIHRvIGF2b2lkIHJhdGUgbGltaXRpbmcgaXNzdWVzXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaHVua3MubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgY29uc3QgYmF0Y2ggPSBjaHVua3Muc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XG4gICAgICBcbiAgICAgIC8vIFByb2Nlc3MgYmF0Y2ggaW4gcGFyYWxsZWxcbiAgICAgIGNvbnN0IGJhdGNoUHJvbWlzZXMgPSBiYXRjaC5tYXAoYXN5bmMgKGNodW5rLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBlbWJlZGRpbmcgPSBhd2FpdCBnZXRFbWJlZGRpbmcoY2h1bmspO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiBgY2h1bmstJHtpICsgaW5kZXh9YCxcbiAgICAgICAgICB0ZXh0OiBjaHVuayxcbiAgICAgICAgICBlbWJlZGRpbmdcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChiYXRjaFByb21pc2VzKTtcbiAgICAgIGVtYmVkZGVkQ2h1bmtzLnB1c2goLi4uYmF0Y2hSZXN1bHRzKTtcbiAgICAgIFxuICAgICAgLy8gU2ltcGxlIHByb2dyZXNzIGxvZ2dpbmdcbiAgICAgIGNvbnNvbGUubG9nKGBFbWJlZGRlZCAke01hdGgubWluKGkgKyBiYXRjaFNpemUsIGNodW5rcy5sZW5ndGgpfS8ke2NodW5rcy5sZW5ndGh9IGNodW5rc2ApO1xuICAgICAgXG4gICAgICAvLyBBZGQgYSBzbWFsbCBkZWxheSBiZXR3ZWVuIGJhdGNoZXMgdG8gYXZvaWQgcmF0ZSBsaW1pdGluZ1xuICAgICAgaWYgKGkgKyBiYXRjaFNpemUgPCBjaHVua3MubGVuZ3RoKSB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU2F2ZSBlbWJlZGRpbmdzIHRvIGRpc2sgYWZ0ZXIgaW5pdGlhbGl6YXRpb25cbiAgICBzYXZlRW1iZWRkaW5nc1RvRGlzaygpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdSQUcgaW5pdGlhbGl6YXRpb24gY29tcGxldGUnKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgUkFHOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIFJBRycpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeVJBRyhxdWVzdGlvbjogc3RyaW5nLCB0b3BLOiBudW1iZXIgPSAzKSB7XG4gIHRyeSB7XG4gICAgaWYgKGVtYmVkZGVkQ2h1bmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSQUcgc3lzdGVtIG5vdCBpbml0aWFsaXplZCB3aXRoIGNvbnRlbnQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IGVtYmVkZGluZyBmb3IgdGhlIHF1ZXN0aW9uXG4gICAgY29uc3QgcXVlc3Rpb25FbWJlZGRpbmcgPSBhd2FpdCBnZXRFbWJlZGRpbmcocXVlc3Rpb24pO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBzaW1pbGFyaXR5IHNjb3JlcyBmb3IgYWxsIGNodW5rc1xuICAgIGNvbnN0IHNjb3JlZENodW5rcyA9IGVtYmVkZGVkQ2h1bmtzLm1hcChjaHVuayA9PiAoe1xuICAgICAgLi4uY2h1bmssXG4gICAgICBzY29yZTogY29tcHV0ZUNvc2luZVNpbWlsYXJpdHkocXVlc3Rpb25FbWJlZGRpbmcsIGNodW5rLmVtYmVkZGluZylcbiAgICB9KSk7XG4gICAgXG4gICAgLy8gU29ydCBieSBzaW1pbGFyaXR5IHNjb3JlIChkZXNjZW5kaW5nKSBhbmQgdGFrZSB0b3AgS1xuICAgIGNvbnN0IHRvcENodW5rcyA9IHNjb3JlZENodW5rc1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKVxuICAgICAgLnNsaWNlKDAsIHRvcEspO1xuICAgIFxuICAgIC8vIEV4dHJhY3QganVzdCB0aGUgdGV4dCBmcm9tIHRoZSB0b3AgY2h1bmtzXG4gICAgY29uc3QgcmVsZXZhbnRDb250ZXh0ID0gdG9wQ2h1bmtzLm1hcChjaHVuayA9PiBjaHVuay50ZXh0KS5qb2luKFwiXFxuXFxuXCIpO1xuICAgIFxuICAgIC8vIEdldCB0aGUgR2VtaW5pIG1vZGVsIGZvciBnZW5lcmF0aW5nIHJlc3BvbnNlc1xuICAgIGNvbnN0IG1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6IFwiZ2VtaW5pLTIuMC1mbGFzaC1saXRlLXByZXZpZXctMDItMDVcIiB9KTtcbiAgICBcbiAgICAvLyBDcmVhdGUgdGhlIHByb21wdCB3aXRoIGNvbnRleHQgYW5kIHF1ZXN0aW9uXG4gICAgY29uc3QgcHJvbXB0ID0gYFlvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4gVXNlIHRoZSBmb2xsb3dpbmcgZG9jdW1lbnRhdGlvbiBjb250ZXh0IHRvIGFuc3dlciB0aGUgcXVlc3Rpb24uXG5cbkNvbnRleHQ6XG4ke3JlbGV2YW50Q29udGV4dH1cblxuUXVlc3Rpb246XG4ke3F1ZXN0aW9ufVxuXG5JZiB0aGUgYW5zd2VyIGNhbm5vdCBiZSBmb3VuZCBpbiB0aGUgY29udGV4dCwgc2F5IFwiSSBkb24ndCBoYXZlIGVub3VnaCBpbmZvcm1hdGlvbiB0byBhbnN3ZXIgdGhhdCBxdWVzdGlvbiBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRhdGlvbi5cImA7XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgYSByZXNwb25zZVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudChwcm9tcHQpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzdWx0LnJlc3BvbnNlLnRleHQoKTtcbiAgICBcbiAgICByZXR1cm4geyBcbiAgICAgIHJlc3BvbnNlLFxuICAgICAgdXNlZENodW5rczogdG9wQ2h1bmtzLm1hcChjaHVuayA9PiAoeyBpZDogY2h1bmsuaWQsIHRleHQ6IGNodW5rLnRleHQgfSkpXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBxdWVyeWluZyBSQUc6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHF1ZXJ5IFJBRycpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSQUdTdGF0dXMoKSB7XG4gIC8vIEFkZCBsb2dnaW5nIHRvIGhlbHAgZGVidWcgdGhlIGluaXRpYWxpemF0aW9uIHN0YXRlXG4gIGNvbnNvbGUubG9nKGBSQUcgc3RhdHVzIGNoZWNrOiAke2VtYmVkZGVkQ2h1bmtzLmxlbmd0aH0gY2h1bmtzIGxvYWRlZCwgaW5pdGlhbGl6ZWQ6ICR7ZW1iZWRkZWRDaHVua3MubGVuZ3RoID4gMH1gKTtcbiAgXG4gIHJldHVybiB7XG4gICAgaW5pdGlhbGl6ZWQ6IGVtYmVkZGVkQ2h1bmtzLmxlbmd0aCA+IDAsXG4gICAgY2h1bmtDb3VudDogZW1iZWRkZWRDaHVua3MubGVuZ3RoXG4gIH07XG59Il0sIm5hbWVzIjpbIkdvb2dsZUdlbmVyYXRpdmVBSSIsImdldEVtYmVkZGluZyIsImNvbXB1dGVDb3NpbmVTaW1pbGFyaXR5IiwiZnMiLCJwYXRoIiwiZ2VuQUkiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJlbWJlZGRpbmdzRmlsZVBhdGgiLCJqb2luIiwiY3dkIiwiZW1iZWRkZWRDaHVua3MiLCJleGlzdHNTeW5jIiwiZGF0YSIsInJlYWRGaWxlU3luYyIsIkpTT04iLCJwYXJzZSIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJlcnJvciIsInNhdmVFbWJlZGRpbmdzVG9EaXNrIiwiZGF0YURpciIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsIndyaXRlRmlsZVN5bmMiLCJzdHJpbmdpZnkiLCJpbml0aWFsaXplUkFHIiwiY2h1bmtzIiwiYmF0Y2hTaXplIiwiaSIsImJhdGNoIiwic2xpY2UiLCJiYXRjaFByb21pc2VzIiwibWFwIiwiY2h1bmsiLCJpbmRleCIsImVtYmVkZGluZyIsImlkIiwidGV4dCIsImJhdGNoUmVzdWx0cyIsIlByb21pc2UiLCJhbGwiLCJwdXNoIiwiTWF0aCIsIm1pbiIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiRXJyb3IiLCJxdWVyeVJBRyIsInF1ZXN0aW9uIiwidG9wSyIsInF1ZXN0aW9uRW1iZWRkaW5nIiwic2NvcmVkQ2h1bmtzIiwic2NvcmUiLCJ0b3BDaHVua3MiLCJzb3J0IiwiYSIsImIiLCJyZWxldmFudENvbnRleHQiLCJtb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsInByb21wdCIsInJlc3VsdCIsImdlbmVyYXRlQ29udGVudCIsInJlc3BvbnNlIiwidXNlZENodW5rcyIsImdldFJBR1N0YXR1cyIsImluaXRpYWxpemVkIiwiY2h1bmtDb3VudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/rag.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/chat.ts */ \"(api-node)/./pages/api/chat.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chat\",\n        pathname: \"/api/chat\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGY2hhdCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGY2hhdC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNnRDtBQUNoRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsK0NBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLCtDQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2NoYXQudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXRcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/chat.ts":
/*!***************************!*\
  !*** ./pages/api/chat.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_rag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/rag */ \"(api-node)/./lib/rag.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_rag__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_rag__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            message: 'Method not allowed'\n        });\n    }\n    try {\n        const { query } = req.body;\n        if (!query) {\n            return res.status(400).json({\n                message: 'Query is required'\n            });\n        }\n        // Check if RAG system is initialized\n        const ragStatus = (0,_lib_rag__WEBPACK_IMPORTED_MODULE_0__.getRAGStatus)();\n        if (!ragStatus.initialized) {\n            return res.status(400).json({\n                message: 'No documentation loaded',\n                error: 'Please upload documentation before chatting. You can do this from the upload page.'\n            });\n        }\n        // Query the RAG system\n        const result = await (0,_lib_rag__WEBPACK_IMPORTED_MODULE_0__.queryRAG)(query);\n        // Return the response\n        return res.status(200).json({\n            response: result.response,\n            usedChunks: result.usedChunks\n        });\n    } catch (error) {\n        console.error('Error processing chat query:', error);\n        return res.status(500).json({\n            message: 'Failed to process your query',\n            error: error.message || 'Unknown error'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9jaGF0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ3VEO0FBRXhDLGVBQWVFLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFxQjtJQUM5RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHTixJQUFJTyxJQUFJO1FBRTFCLElBQUksQ0FBQ0QsT0FBTztZQUNWLE9BQU9MLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBb0I7UUFDN0Q7UUFFQSxxQ0FBcUM7UUFDckMsTUFBTUcsWUFBWVYsc0RBQVlBO1FBQzlCLElBQUksQ0FBQ1UsVUFBVUMsV0FBVyxFQUFFO1lBQzFCLE9BQU9SLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxTQUFTO2dCQUNUSyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLHVCQUF1QjtRQUN2QixNQUFNQyxTQUFTLE1BQU1kLGtEQUFRQSxDQUFDUztRQUU5QixzQkFBc0I7UUFDdEIsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQlEsVUFBVUQsT0FBT0MsUUFBUTtZQUN6QkMsWUFBWUYsT0FBT0UsVUFBVTtRQUMvQjtJQUVGLEVBQUUsT0FBT0gsT0FBTztRQUNkSSxRQUFRSixLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxPQUFPVCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RLLE9BQU9BLE1BQU1MLE9BQU8sSUFBSTtRQUMxQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL2lpaXRkL29yZWtpL2xsbWRvY3Mtci9yYWctYXBwL3BhZ2VzL2FwaS9jaGF0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IHF1ZXJ5UkFHLCBnZXRSQUdTdGF0dXMgfSBmcm9tICcuLi8uLi9saWIvcmFnJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcXVlcnkgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFxdWVyeSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1F1ZXJ5IGlzIHJlcXVpcmVkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBSQUcgc3lzdGVtIGlzIGluaXRpYWxpemVkXG4gICAgY29uc3QgcmFnU3RhdHVzID0gZ2V0UkFHU3RhdHVzKCk7XG4gICAgaWYgKCFyYWdTdGF0dXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICBtZXNzYWdlOiAnTm8gZG9jdW1lbnRhdGlvbiBsb2FkZWQnLFxuICAgICAgICBlcnJvcjogJ1BsZWFzZSB1cGxvYWQgZG9jdW1lbnRhdGlvbiBiZWZvcmUgY2hhdHRpbmcuIFlvdSBjYW4gZG8gdGhpcyBmcm9tIHRoZSB1cGxvYWQgcGFnZS4nIFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUXVlcnkgdGhlIFJBRyBzeXN0ZW1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeVJBRyhxdWVyeSk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIHJlc3BvbnNlXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHJlc3BvbnNlOiByZXN1bHQucmVzcG9uc2UsXG4gICAgICB1c2VkQ2h1bmtzOiByZXN1bHQudXNlZENodW5rc1xuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBjaGF0IHF1ZXJ5OicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gcHJvY2VzcyB5b3VyIHF1ZXJ5JyxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ1xuICAgIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbInF1ZXJ5UkFHIiwiZ2V0UkFHU3RhdHVzIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwicXVlcnkiLCJib2R5IiwicmFnU3RhdHVzIiwiaW5pdGlhbGl6ZWQiLCJlcnJvciIsInJlc3VsdCIsInJlc3BvbnNlIiwidXNlZENodW5rcyIsImNvbnNvbGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/chat.ts\n");

/***/ }),

/***/ "@google/generative-ai":
/*!****************************************!*\
  !*** external "@google/generative-ai" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@google/generative-ai");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();